<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
            integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css">
        <style>
            body {
                font-family: DejaVu Sans, sans-serif;
                padding-left: 2px;
                background-color: white;
            }
    
            .table-suply {
                border: 1px solid black;
                border-top: none;
                margin-top: 20px;
            }
    
            .table-suply tr th,
            .table-suply tr td {
                border-top: 1px solid #000000;
                text-align: center;
                border-right: 1px solid #000000;
                padding: 1px;
    
            }
    
            .table-suply tr th:last-child,
            .table-suply tr td:last-child {
                border-right: none;
            }
    
            .p-text-1 {
                text-decoration: underline;
                padding-top: 10px;
            }
    
            .p-text-2 {
                padding-top: 10px;
            }
    
            .cont-challan-single {
                float: left;
                width: 100%;
                border: 1px solid #000000;
                padding: 5px 10px;
                margin-bottom: 20px;
            }
    
            .challan-single-title {
                float: left;
                width: 50%;
            }
    
            .suplier {
                width: 22%;
                border-right: 1px solid black;
                padding: 5px 0px;
            }
    
            .cont-suplier .challan-single-title:last-child {
                width: 77%;
                text-align: center;
                padding: 5px 0px;
            }
    
            .cont-challan-single.cont-suplier {
                padding: 0px 10px;
            }
    
            .table-suply.no-border tr td {
                border-top: none;
                border-right: none;
                padding: 0px;
            }
    
            .table-suply.no-border tr th {
                border-right: none;
            }
    
            .table-challan tr th {
                border-top: 1px solid #000000;
            }
    
            .table-challan tr th,
            .table-challan tr td {
    
                text-align: center;
            }
    
            .table-challan tr th:first-child,
            .table-challan tr td:first-child {
                border-left: 1px solid #000000;
                border-bottom: 1px solid #000000;
    
            }
    
            .table-challan tr th:last-child,
            .table-challan tr td:last-child {
                border-right: 1px solid #000000;
                border-bottom: 1px solid #000000;
    
            }
    
            .table-challan tr th:last-child,
            .table-challan tr th:first-child {
                border-bottom: none;
            }
    
            .p-tr td {
                padding: 0px !important;
                padding: 3px 8px 3px 3px !important;
                border-right: 1px solid #000000;
                border-top: 1px solid #000;
            }
    
            .invoice-total tr td,
            .invoice-total tr th {
                text-align: right;
            }
    
            footer {
                position: fixed;
                bottom: -20px;
                left: 0px;
                right: 0px;
                height: 70px;
                font-size: 12px !important;
    
                /** Extra personal styles **/
                background-color: white;
                color: black;
                text-align: center;
            }
    
            .content-container:before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                background-image: url('{{asset("https://gs1.org.sa/upload/invoice_tree.png")}}');
                /*            background-image: url('{{asset("\Config::get(`app.url`)/upload/invoice_tree.png")}}');*/
                background-size: 500px;
                background-position: center;
                background-repeat: no-repeat;
                width: 100%;
                height: 100%;
                opacity: .1;
                z-index: 2;
            }
        </style>
    
    </head>

<body>
    <?php 
        $memberData = \App\Models\User::with('gtin_subscription')->where('id',$addMember->id)->first();
        $general = \App\Models\GeneralSetting::first();
        $registrationType = '';
        if ($cart->request_type=='registration') {
            $registrationType = "New Registration";
        } elseif ($cart->request_type=='renew') {
            $registrationType = "Renew";
        } elseif ($cart->request_type=='addon') {
            $registrationType = "Addons (Other Products)";
        }
        
        $currentDate = date('d-m-Y');
        $explodeDate = explode('-', $currentDate);
        $date['day'] = $explodeDate[0];
        $date['month'] = $explodeDate[1];
        $date['year'] = $explodeDate[2];
    ?>

    <center style="margin: 0px auto;">
        <div class="content-container">
            <div class="contents">
                <footer>
                    <table class="" width="100%" cellspacing="0" cellpadding="0"
                        style="border:none; font-size: 11px; line-height: 0.5 rem;">
                        <tr>
                            <td width="10%" class="text-left"
                                style="border-right-style: 1px solid; border-color: #ED7D31">
                                <span>
                                    <?php echo DNS2D::getBarcodeHTML('http://www.gs1.org.sa', 'QRCODE',2,2); ?>
                                </span>
                            </td>
                            <td width="90%" class="text-left" style="margin-left: 10px;">
                                <table class="" width="100%" cellspacing="0" cellpadding="0"
                                    style="border:none; font-size: 11px; line-height: 0.5 rem;">
                                    <tr>
                                        <td>
                                            <i class="fas fa-phone" aria-hidden="true"></i>
                                        </td>
                                        <td style="padding-left: 10px;">
                                            +<span>966</span>-<span>11</span>-<span>218</span>-<span>2423</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <i class="fas fa-envelope" aria-hidden="true"></i>
                                        </td>
                                        <td style="padding-left: 10px;">
                                            gs1sa@gs1.org.sa
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <i class="fas fa-map-marker" aria-hidden="true"></i>
                                        </td>
                                        <td style="padding-left: 10px;">
                                            <span>
                                                King Fahad Branch Road, Al-Moatamarat District
                                                P.O.Box 16683 Riyadh 11474, Saudi Arabia
                                            </span>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </footer>
                <!----------------------------->

                <table width="100%" cellspacing="0" cellpadding="0" style="border:none;">
                    <tr>
                        <td width="100%" class="text-center text-bold"><strong>Invoice</strong></td>
                    </tr>
                </table>
                <table width="100%" cellspacing="0" cellpadding="0" style="border:none;">
                    <tr>
                        <td width="50%">
                            <img src="{{public_path('backend/images/logo/'. $general->service_default_image)}}"
                                alt="logo" style="width: 116.64px; height: 58px;">
                        </td>
                        <td width="50%" class="text-right">
                            <img src="{{public_path('backend/images/logo/'. $general->logo)}}" alt="logo"
                                style="width: 135.64px; height: 58px; padding-bottom: 5px;">
                        </td>
                    </tr>
                </table>
                <hr style=" width: 100%; border: 10px solid #EF6231;"></hr>
                <table class="" width="100%" cellspacing="0" cellpadding="0"
                    style="border:none; font-size: 11px; line-height: 0.5 rem;">
                    <tr>
                        <td width="50%">
                            <p style="line-height: 1rem;"><b>BILL TO,</b><br><span>{{@$memberData['company_name_eng']}}</span>
                            </p>
                        </td>
                        <td width="50%" class="text-right">

                        </td>
                    </tr>
                    <tr>
                        <td width="50%">

                        </td>
                        <td width="50%" class="text-right">

                        </td>
                    </tr>
                    <tr>
                        <td width="50%">
                            <address>
                                <p style="line-height: 1rem;">POBOX: <span>{{@$memberData->address->zip}}</span><br>
                                    Mobile: <span>+</span>{{@$memberData['mobile']}}<br><span>{{@$memberData->address->countryName}},{{@$memberData->address->stateName}} ,{{@$memberData->address->cityName}}</span>
                                </p>
                            </address>
                        </td>
                        <td width="50%" class="text-right">
                            <p class="p-text" style="line-height: 1rem;"><b>Date of Issue:</b><span>{{$date['day']}}</span>-<span>{{$date['month']}}</span>-<span>{{$date['year']}}</span><br><b>Company ID: </b>{{@$memberData['companyID']}} <br><b>Transaction ID: </b>{{@$cart->transaction_id}}
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td width="50%">
                            <p class="p-text"><b>Type of Payment: </b>{{@$registrationType}}</p>
                        </td>
                    </tr>
                    <tr>
                        <td width="50%">
                            <p class="p-text"><b>Membership Type:</b>{{@$memberData->gtin_subscription->products->member_category_description}}</p>
                        </td>
                        @if($cart->request_type=='addon')
                        @endif
                    </tr>
                    <tr>
                        <td width="50%">
                            <p class="p-text"><b>Payment Method:</b>{{(@$cart->payment_type=='bank_transfer')?'Bank':'Mada/Visa'}}</p>
                        </td>
                    </tr>
                </table>

                <?php 
                    $counter = 0;
                    $cartItems = unserialize($cart->cart_items);
                    $items = getMemberCartProducts($cartItems);
                    $tbalance= 0;
                    $total_balance = 0;
                ?>

                <table class="table-suply table-sm" width="100%" cellspacing="0" cellpadding="0"
                    style=" font-size: 11px;">
                    <tr class="p-text text-bold"
                        style="background-color: #003D79; color: white;">
                        <th colspan="2">#</th>
                        <th colspan="4">Description</th>
                        <th colspan="2">Registration Fee</th>
                        <th colspan="2">Yearly Fee</th>
                        <th colspan="2">SubTotal</th>
                    </tr>

                    @foreach($items as $addon)
                    <?php $counter = $counter +1; ?>
                    <tr>
                        <td colspan="2" class="text-center p-text">{{$counter}}</td>
                        <td colspan="4" class="p-text text-left">{{$addon}}</td>
                        <td colspan="2" class="p-text text-right">0</td>
                        <td colspan="2" class="p-text text-right">0</td>
                        <td colspan="2" class="text-right p-text text-left">0</td>
                    </tr>
                    @endforeach

                    <tr style="background-color: #003D79; color: white; font-weight: bold;">
                        <td colspan="10" class="text-bold p-text text-left"><span>Total</span></td>
                        <td colspan="2" class="text-bold p-text text-right">{{@$custom_amount}}</td>
                    </tr>
                </table><br>

                <?php 
                    $company_details = \App\Models\CompanyDetail::first();
                ?>

                <div>
                    <p class="p-text" style="line-height: 0.5;">This is a system generated document and does not
                        require any signature and stamp.</p>
                </div>

                <table class="table-suply table-sm" width="100%" cellspacing="0" cellpadding="0"
                    style=" font-size: 11px;">
                    <tr class="p-text text-bold" style="background-color: #003D79;">
                        <td colspan="12" align="center" class="p-text text-left"><b>For bank transfer to our bank
                                account</b></td>
                    </tr>
                    <tr>
                        <td width="40%" colspan="4" class="text-left">Name</td>
                        <td width="60%" colspan="8" class="text-left">{{$company_details->title}}</td>
                    </tr>
                    <tr>
                        <td width="40%" colspan="4" class="text-left">Account Number</td>
                        <td width="60%" colspan="8" class="text-left">{{$company_details->account_no}}</td>
                    </tr>
                    <tr>
                        <td width="40%" colspan="4" class="text-left">IBAN NO</td>
                        <td width="60%" colspan="8" class="text-left">{{$company_details->iban_no}}</td>
                    </tr>
                    <tr>
                        <td width="40%" colspan="4" class="text-left">Bank Name</td>
                        <td width="60%" colspan="8" class="text-left">{{$company_details->bank_name}}</td>
                    </tr>
                    <tr>
                        <td width="40%" colspan="4" class="text-left">Bank Swift Code</td>
                        <td width="60%" colspan="8" class="text-left">{{$company_details->bank_swift_code}}</td>
                    </tr>
                </table><br>

                <div>
                    <p class="p-text" style="line-height: 0.5;">*Upon transfer, Please upload a copy of transfer receipt
                        from your account.</p>
                </div>
            </div>
        </div>
    </center>
</body>

</html>
